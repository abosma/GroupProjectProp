<link rel="import" href="../my-agenda/my-agenda-les.html">
<dom-module id="my-agenda-dag">
    <template>
        <style>
            :host{
                display: block;
                width: 100%;
            };

            .dagen-agenda {
                border-right: 1px solid #1693c9;
                background: #33aadd;
                padding: 10px;
                text-align: center;
                color: white;
            }

            my-agenda-les {
                border-bottom: 1px solid #ccc;
                border-right: 1px solid #ccc;

            }

        </style>
        <div class="dag">
            <div class="dagen-agenda">[[_fix_date(datum)]]</div>
            <!-- Lelijk en hardcoced
                TODO: automatisch genereren die hap!
             -->
             <template is="dom-repeat" items="[[lessen]]">
              <my-agenda-les 
                vak="[[item.vak]]" 
                datum="[[item.datum]]"
                begin="[[item.begin]]" 
                eind="[[item.eind]]" 
                locatie="[[item.locatie]]" 
                groepen="[[item.vak]]" 
                docent="[[item.docent]]">
              </my-agenda-les>  
             </template>
        </div>
    </template>
    <script>
        Polymer({
            is: 'my-agenda-dag',
            properties: {
               rol: {
                type: String,
                notify: true,   
              },

              isStudent: {
                    type: Boolean,
                    value: true,
              },

              datum: {
                type: String,
                notify: true,
              },

              c_visible: {
                type: Boolean,
                value: false,
              },
              c_username: {
                type: String,
              },
              lessen: {
                type: Object,
                observer: '_initializing',
              }
            },

            _initializing : function() {
              if(this.c_visible){
                //this._student_dag_rooster_ophalen_request();
                //console.log(lessen);
              }
            },

            _fix_date : function(dateString){
              var tijd_datum = new Date(dateString);
              var dag = tijd_datum.getDay(); //dag in woorden
              var dag2 = tijd_datum.getDate(); // dag in getal
              var maand = tijd_datum.getMonth(); // +1 want js begint bij 0 te tellen

              var maandarray = new Array('JAN', 'FEB', 'MA', 'APR', 'MEI', 'JUN', 'JUL', 'AUG', 'SEP', 'OKT', 'NOV', 'DEC');
              var dagarray = new Array('ZO','MA','DI', 'WO', 'DO', 'VR', 'ZA');
              return(dagarray[dag]+" "+dag2+" "+maandarray[maand]);
            },   
        });
    </script>
</dom-module>