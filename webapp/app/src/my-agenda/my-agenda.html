<<<<<<< HEAD
<link rel="import" href="../my-agenda/my-agenda-dag.html">
<dom-module id="my-agenda">
    <template>
        <style>
            :host {
                display: block;
            }

            .container {
              @apply(--layout-horizontal);
              @apply(--layout-justified);
            }

            .agenda {
                padding-right: 22px;
                border: 1px solid #1693c9;            
            }

            .mouseHover:hover {
                cursor: pointer;
                color: #33aadd;
            }


        </style>

        <!-- Header Agenda  -->
        <div class="container">
            <div><h2>Mijn weekrooster || [[rol]]</h2></div>
            <div><h3> <iron-icon icon="arrow-back" on-click="changeWeekDown" class="mouseHover"></iron-icon> Week [[c_currentWeek]]  <iron-icon icon="arrow-forward" on-click="changeWeekUp" class="mouseHover"></iron-icon></h3></div>
        </div>

        <div class="container agenda">
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,1)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,2)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,3)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,4)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,5)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>

             <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,6)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
        </div>

    </template>
    <script>
        Polymer({
            is: 'my-agenda',
            properties: {
                rol: {
                    type: String,
                    notify: true,   
                },

                isStudent: {
                    type: Boolean,
                    value: true,
                },
                systeemdatumlokaal: {
                    type: String,
                },
                systeemdatumstandaard: {
                    type: String,
                },
                c_visible: {
                    type: Boolean,
                    value: false,
                },
                c_username: {
                    type: String
                },


                c_currentWeek: {
                    type: Number,
                }
            },  // end of properties
            ready : function() {
                d = new Date();
                d.setHours(0,0,0);
                d.setDate(d.getDate() + 4 - (d.getDay()||7));
                var yearStart = new Date(d.getFullYear(),0,1);
                this.c_currentWeek = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7)
            },

            _fix_date : function(dateString, dayOfWeek){
                var d = new Date(dateString);
                //console.log("Before: " + d);
                d.setDate(d.getDate() + (dayOfWeek - d.getDay()));
                //console.log("After:" + d );
                var dateString = d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
                return dateString;
            },    

            changeWeekUp: function() {
                var weeksInYear = this.weeksInYear(2017);
                if(this.c_currentWeek == weeksInYear){
                    this.c_currentWeek = 1;
                }else{
                    this.c_currentWeek += 1;
                }
            },

            changeWeekDown: function() {
                var weeksInYear = this.weeksInYear(2017);
                if(this.c_currentWeek == 1){
                    this.c_currentWeek = weeksInYear;
                }else{
                    this.c_currentWeek -= 1;
                }
            },

            weeksInYear: function(year) {
              var month = 11, day = 31, week;

              // Find week that 31 Dec is in. If is first week, reduce date until
              // get previous week.
              do {
                d = new Date(year, month, day--);
                week = this.getWeekNumber(d)[1];
              } while (week == 1);

              return week;
            },

            getWeekNumber: function(d) {
                d = new Date(+d);
                d.setHours(0,0,0);
                // Set to nearest Thursday: current date + 4 - current day number
                // Make Sunday's day number 7
                d.setDate(d.getDate() + 4 - (d.getDay()||7));
                // Get first day of year
                var yearStart = new Date(d.getFullYear(),0,1);
                // Calculate full weeks to nearest Thursday
                var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7)
                // Return array of year and week number
                return [d.getFullYear(), weekNo];
            },
        });
    </script>
=======
<link rel="import" href="../my-agenda/my-agenda-dag.html">
<dom-module id="my-agenda">
    <template>
        <style>
            :host {
                display: block;
            }

            .container {
              @apply(--layout-horizontal);
              @apply(--layout-justified);
            }
        </style>

        <!-- Header Agenda  -->
        <div class="container">
            <div><h2>Mijn weekrooster || [[rol]]</h2></div>
            <div><h3> <iron-icon icon="arrow-back"></iron-icon> Week 3  <iron-icon icon="arrow-forward"></iron-icon></h3></div>
        </div>

        <div class="container dagen-content">
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,1)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,2)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,3)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,4)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
            <my-agenda-dag datum="[[_fix_date(systeemdatumstandaard,5)]]" c_visible="{{c_visible}}" c_username="{{c_username}}"></my-agenda-dag>
        </div>

    </template>
    <script>
        Polymer({
            is: 'my-agenda',
            properties: {
                rol: {
                    type: String,
                    notify: true,   
                },

                isStudent: {
                    type: Boolean,
                    value: true,
                },
                systeemdatumlokaal: {
                    type: String,
                },
                systeemdatumstandaard: {
                    type: String,
                },
                c_visible: {
                    type: Boolean,
                    value: false,
                },
                c_username: {
                    type: String
                }
            },  // end of properties
            _fix_date : function(dateString, dayOfWeek){
                var d = new Date(dateString);
                console.log("Before: " + d);
                d.setDate(d.getDate() + (dayOfWeek - d.getDay()));
                console.log("After:" + d );
                var dateString = d.getDate()+"-"+(d.getMonth()+1)+"-"+d.getFullYear();
                return dateString;
            },    
        });
    </script>
>>>>>>> origin/master
</dom-module>