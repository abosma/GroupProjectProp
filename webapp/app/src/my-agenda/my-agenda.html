<link rel="import" href="../my-agenda/my-agenda-dag.html">
<dom-module id="my-agenda">
    <template>
        <style>
            :host {
                display: block;
            }

            .container {
              @apply(--layout-horizontal);
              @apply(--layout-justified);
            }

            .agenda {
                border: 1px solid #1693c9;            
            }

            .mouseHover:hover {
                cursor: pointer;
                color: #33aadd;
            }
        </style>

        <div class="container agenda">
            <template is="dom-repeat" items=[[lessen]]>
                <my-agenda-dag 
                    datum="[[_pas_datum_aan(roosterdatum,index)]]" 
                    c_username="{{c_username}}" 
                    rol="{{rol}}"
                    lessen="{{item}}">
                </my-agenda-dag>
            </template>
        </div>

    </template>
    <script>
        Polymer({
            is: 'my-agenda',
            properties: {
                rol: {
                    type: String,
                    notify: true,   
                    observer: '_tester',
                },

                isStudent: {
                    type: Boolean,
                    value: true,
                },
                datum: {
                    type: String,
                    notify: true,   
                },
                c_visible: {
                    type: Boolean,
                    value: false,
                },
                c_username: {
                    type: String
                },

                c_currentWeek: {
                    type: Number,
                },
                lessen: {
                    type: Object,
                    observer: '_initializing',
                }
            },  // end of properties
            _tester : function(){                
                console.log("_initializing@my-agenda: " + this.rol);
            },

             _initializing : function() {
                lDatum = new Date(this.datum);
                this.roosterdatum = this.datum;
                lDatum.setHours(0,0,0);
                lDatum.setDate(lDatum.getDate() + 4 - (lDatum.getDay()||7));
                var yearStart = new Date(lDatum.getFullYear(),0,1);
                this.c_currentWeek = Math.ceil(( ( (lDatum - yearStart) / 86400000) + 1)/7)
            },

            _pas_datum_aan : function(string_datum, int_weekdag){
                var lDatum = new Date(string_datum);
                int_weekdag = int_weekdag+1; // offset voor ind
                lDatum.setDate(lDatum.getDate() + (int_weekdag - lDatum.getDay()));
                var return_string_datum = lDatum.getFullYear()+"-"+(lDatum.getMonth()+1)+"-"+lDatum.getDate();
                return return_string_datum;
            },    
        });
    </script>
</dom-module>